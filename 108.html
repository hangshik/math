<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>대푯값 계산기</title>
<style>
  body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; max-width: 600px; margin: 0 auto; background-color: #f9f9f9; padding-bottom: 50px; }
  
  h1 { margin-top: 30px; color: #333; }

  /* 입력 표시 화면 */
  .display-box {
    background: #fff;
    border: 2px solid #333;
    border-radius: 10px;
    height: 60px;
    margin: 20px auto 10px auto;
    width: 90%;
    max-width: 450px;
    display: flex;
    align-items: center;
    justify-content: flex-end; 
    padding: 0 15px;
    font-size: 32px;
    font-weight: bold;
    color: #333;
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
    overflow: hidden;
  }
  .placeholder { color: #ccc; }

  /* 키패드 그리드 (5열 구조) */
  .keypad {
    display: grid;
    grid-template-columns: repeat(5, 1fr); /* 5칸으로 나눔 */
    gap: 8px;
    max-width: 480px; /* 5개 버튼이 들어가도록 너비 조정 */
    margin: 0 auto;
    padding: 10px;
    background: #eee;
    border-radius: 15px;
  }

  .key-btn {
    padding: 15px 0;
    font-size: 24px;
    font-weight: bold;
    border: 1px solid #ccc;
    border-radius: 8px;
    cursor: pointer;
    background: white;
    box-shadow: 0 2px 0 #bbb;
    transition: active 0.1s, transform 0.1s;
    user-select: none;
    width: 100%;
  }
  .key-btn:active { transform: translateY(2px); box-shadow: none; }
  .key-btn:hover { background-color: #f5f5f5; }

  /* 넓은 버튼 (2칸 차지) */
  .btn-wide {
    grid-column: span 2; 
  }

  /* 기능 버튼 색상 */
  .btn-enter { background-color: #3399FF; color: white; border-color: #2b80d6; box-shadow: 0 2px 0 #1a6cb5; }
  .btn-enter:hover { background-color: #2b80d6; }
  
  .btn-reset { background-color: #ff5252; color: white; border-color: #d32f2f; box-shadow: 0 2px 0 #c62828; }
  .btn-reset:hover { background-color: #d32f2f; }
  
  .btn-clear { background-color: #ff9800; color: white; border-color: #f57c00; box-shadow: 0 2px 0 #e65100; }
  .btn-clear:hover { background-color: #f57c00; }

  /* 결과 카드 영역 */
  .card-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin: 20px 0; min-height: 50px;}
  .num-card { 
    width: 50px; height: 50px; background: #fff; border: 2px solid #555; 
    border-radius: 50%; display: flex; align-items: center; justify-content: center;
    font-size: 18px; font-weight: bold; box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
    animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }
  @keyframes popIn { from { transform: scale(0); } to { transform: scale(1); } }

  .median-highlight { background-color: #ffeb3b; border-color: orange; transform: scale(1.1); z-index: 1; }
  
  .result-box { max-width: 480px;text-align: left; padding: 20px; border: 2px solid #ddd; border-radius: 10px; margin: 20px auto; background: white;}
  .stat-row { font-size: 20px; margin: 10px 0; border-bottom: 1px solid #eee; padding-bottom: 5px;}
  .label { display: inline-block; width: 120px; font-weight: bold; color: #555; }
</style>
</head>
<body>

<h1>대푯값 계산기</h1>

<div class="result-box">
  <div class="stat-row"><span class="label">데이터 개수:</span> <span id="countVal">0</span>개</div>
  <div class="stat-row"><span class="label" style="color:blue">평균:</span> <span id="meanVal">0</span></div>
  <div class="stat-row"><span class="label" style="color:orange">중앙값:</span> <span id="medianVal">0</span></div>
  <div class="stat-row" style="border:none"><span class="label">최빈값:</span> <span id="modeVal">-</span></div>
</div>

<div class="card-container" id="cardContainer">
  <!-- 숫자 카드들이 여기 들어감 -->
</div>

<!-- 입력 표시 화면 -->
<div class="display-box" id="displayBox"><span class="placeholder">숫자 입력</span></div>

<!-- 키패드 (5열 3행) -->
<div class="keypad">
  <!-- 1행: 1 ~ 5 -->
  <button class="key-btn" onclick="inputKey('1')">1</button>
  <button class="key-btn" onclick="inputKey('2')">2</button>
  <button class="key-btn" onclick="inputKey('3')">3</button>
  <button class="key-btn" onclick="inputKey('4')">4</button>
  <button class="key-btn" onclick="inputKey('5')">5</button>
  
  <!-- 2행: 6 ~ 0 -->
  <button class="key-btn" onclick="inputKey('6')">6</button>
  <button class="key-btn" onclick="inputKey('7')">7</button>
  <button class="key-btn" onclick="inputKey('8')">8</button>
  <button class="key-btn" onclick="inputKey('9')">9</button>
  <button class="key-btn" onclick="inputKey('0')">0</button>
  
  <!-- 3행: 초기화(2칸), C(1칸), 입력(2칸) -->
  <button class="key-btn btn-wide btn-reset" onclick="resetAllData()">초기화</button>
  <button class="key-btn btn-clear" onclick="clearInput()">C</button>
  <button class="key-btn btn-wide btn-enter" onclick="submitData()">입력</button>
</div>



<p>키패드나 키보드를 사용하여 데이터를 입력하세요.</p>

<script>
let data = [1, 2, 3, 4, 100]; // 초기 데이터
let currentInput = ""; // 현재 입력 중인 문자열

// 화면 업데이트 (입력창)
function updateDisplay() {
  const box = document.getElementById('displayBox');
  if (currentInput === "") {
    box.innerHTML = '<span class="placeholder">숫자 입력</span>';
  } else {
    box.textContent = currentInput;
  }
}

// 키패드 입력 처리
function inputKey(key) {
  // 화면상 키패드에는 . 과 - 가 없지만, 로직은 유지 (키보드 지원 위해)
  if (key === '.' && currentInput.includes('.')) return;
  if (key === '-') {
    if (currentInput === "") currentInput = "-";
    return;
  }
  
  if (currentInput.length > 8) return; // 길이 제한

  currentInput += key;
  updateDisplay();
}

function clearInput() {
  // C 버튼: 현재 입력창만 비움
  currentInput = "";
  updateDisplay();
}

// 데이터 추가 (Enter)
function submitData() {
  if (currentInput === "" || currentInput === "-") return;
  
  const val = parseFloat(currentInput);
  if (!isNaN(val)) {
    data.push(val);
    currentInput = "";
    updateDisplay();
    updateStatsUI();
  }
}

// 데이터 전체 초기화 (초기화 버튼)
function resetAllData() {
  if(confirm("모든 데이터를 삭제하시겠습니까?")) {
    data = [];
    currentInput = "";
    updateDisplay();
    updateStatsUI();
  }
}

// 통계 및 UI 업데이트
function updateStatsUI() {
  // 1. 정렬
  data.sort((a, b) => a - b);
  
  // 2. 카드 그리기
  const container = document.getElementById('cardContainer');
  container.innerHTML = "";
  
  // 중앙값 인덱스
  let midIndices = [];
  const n = data.length;
  if (n > 0) {
    if (n % 2 === 1) {
      midIndices.push(Math.floor(n / 2));
    } else {
      midIndices.push(n / 2 - 1);
      midIndices.push(n / 2);
    }
  }

  data.forEach((num, idx) => {
    const card = document.createElement('div');
    card.className = 'num-card';
    card.textContent = num;
    if (midIndices.includes(idx)) {
      card.classList.add('median-highlight');
    }
    container.appendChild(card);
  });

  // 3. 통계 계산
  if (n === 0) {
    document.getElementById('countVal').innerText = 0;
    document.getElementById('meanVal').innerText = 0;
    document.getElementById('medianVal').innerText = 0;
    document.getElementById('modeVal').innerText = "-";
    return;
  }

  // 평균
  const sum = data.reduce((a, b) => a + b, 0);
  const mean = sum / n;
  
  // 중앙값
  let median;
  if (n % 2 === 1) {
    median = data[Math.floor(n / 2)];
  } else {
    median = (data[n / 2 - 1] + data[n / 2]) / 2;
  }

  // 최빈값
  const frequency = {};
  let maxFreq = 0;
  data.forEach(num => {
    frequency[num] = (frequency[num] || 0) + 1;
    if (frequency[num] > maxFreq) maxFreq = frequency[num];
  });
  
  let modes = [];
  if (maxFreq > 1) { 
    for (const num in frequency) {
      if (frequency[num] === maxFreq) modes.push(num);
    }
  }
  
  // 결과 표시
  document.getElementById('countVal').innerText = n;
  document.getElementById('meanVal').innerText = Number.isInteger(mean) ? mean : mean.toFixed(2);
  document.getElementById('medianVal').innerText = median;
  document.getElementById('modeVal').innerText = modes.length > 0 ? modes.join(", ") : "없음";
}

// 키보드 이벤트 리스너 (물리 키보드 지원)
document.addEventListener('keydown', (e) => {
  if ((e.key >= '0' && e.key <= '9') || e.key === '.' || e.key === '-') {
    inputKey(e.key);
  } else if (e.key === 'Backspace') {
    // 키보드 백스페이스는 한 글자 지우기
    currentInput = currentInput.slice(0, -1);
    updateDisplay();
  } else if (e.key === 'Enter') {
    e.preventDefault();
    submitData();
  } else if (e.key === 'Escape') {
    clearInput();
  }
});

window.onload = function() {
  updateDisplay();
  updateStatsUI();
};
</script>
</body>
</html>