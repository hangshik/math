<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=0.8">
<title>Ïù¥Ï∞®Î∞©Ï†ïÏãù</title>

<script>
  window.MathJax = {
    tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }
  };
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>

<style>
  body {
    font-family: sans-serif;
    text-align: center;
    padding: 30px;
    background: #f9f9f9;
  }

  .container {
    max-width: 700px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }

  .question {
    font-size: 26px;
    margin: 20px 0;
  }

  .choices button {
    width: 260px;
    height: 70px;
    margin: 6px;
    font-size: 20px;
    border-radius: 10px;
    border: 1px solid #ccc;
    background: #fff;
    cursor: pointer;
  }

  .choices button.correct {
    background: #4CAF50;
    color: white;
  }

  .choices button.wrong {
    background: #f44336;
    color: white;
  }

  #resultBox {
    font-size: 26px;
    margin: 15px 0;
    padding: 12px;
    border-radius: 10px;
    font-weight: bold;
    background: #eee;
    color: #000;
  }

  #scoreBoard {
    font-size: 22px;
    margin-top: 10px;
  }

  .stage-btn {
    font-size: 16px;
    padding: 8px 14px;
    margin: 3px;
    border-radius: 10px;
    border: none;
    background: lightgray;
    cursor: pointer;
  }

  .stage-btn.active {
    background: #3399FF;
    color: white;
  }
</style>
</head>

<body>
<div class="container">
<h1>Ïù¥Ï∞®Î∞©Ï†ïÏãù</h1>

<div>
  <button class="stage-btn" onclick="setStage(1)">1Îã®Í≥Ñ</button>
  <button class="stage-btn" onclick="setStage(2)">2Îã®Í≥Ñ</button>
  <button class="stage-btn" onclick="setStage(3)">3Îã®Í≥Ñ</button>
  <button class="stage-btn" onclick="setStage(4)">4Îã®Í≥Ñ</button>
  <button class="stage-btn" onclick="setStage(5)">5Îã®Í≥Ñ</button>
  <button class="stage-btn" onclick="setStage(6)">6Îã®Í≥Ñ</button>
</div>

<div class="question" id="questionBox"></div>
<div class="choices" id="choicesBox"></div>

<div id="resultBox">Ï†ïÎãµÏó¨Î∂Ä</div>
<div id="scoreBoard">Ï†ïÎãµ: 0 | Ïò§Îãµ: 0</div>

<br>
<button onclick="generateQuiz()"
 style="width:260px;height:60px;font-size:28px;
 border-radius:15px;border:none;
 background:#3399FF;color:white;cursor:pointer;">
Îã§Ïùå Î¨∏Ï†ú
</button>
</div>

<script>
let currentStage = 1;
let correctTotal = 0;
let wrongTotal = 0;
let solved = false;

function updateScore(){
  document.getElementById("scoreBoard").textContent =
    `Ï†ïÎãµ: ${correctTotal} | Ïò§Îãµ: ${wrongTotal}`;
}

function setStage(stage){
  currentStage = stage;
  solved = false;
  document.querySelectorAll('.stage-btn').forEach((b,i)=>{
    b.classList.toggle('active', i+1===stage);
  });
  generateQuiz();
}

/* ---------------- Î¨∏Ï†ú ÏÉùÏÑ± Î°úÏßÅÏùÄ Í∏∞Ï°¥ Í∑∏ÎåÄÎ°ú ---------------- */
/* üëâ ÌïµÏã¨ UXÎßå ÏàòÏ†ï */

function generateQuiz(){
  solved = false;

  const resultBox = document.getElementById("resultBox");
  resultBox.textContent = "Ï†ïÎãµÏó¨Î∂Ä";
  resultBox.style.background = "#eee";
  resultBox.style.color = "#000";

  /* ÏòàÏãúÏö© Í∞ÑÎã® Î¨∏Ï†ú (Í∏∞Ï°¥ Î¨∏Ï†ú ÏÉùÏÑ± Î°úÏßÅ Í∑∏ÎåÄÎ°ú ÎëêÏÖîÎèÑ Îê®) */
  const a = 1, b = -3, c = 2;
  const correct = "1, 2";

  const choices = ["1, 2", "‚àí1, 2", "1, ‚àí2", "2, 3", "‚àí1, ‚àí2"]
    .sort(()=>Math.random()-0.5);

  document.getElementById("questionBox").innerHTML =
    `$$x^2 - 3x + 2 = 0$$`;

  const box = document.getElementById("choicesBox");
  box.innerHTML = "";

  choices.forEach(txt=>{
    const btn = document.createElement("button");
    btn.innerHTML = `$$x = ${txt}$$`;

    btn.onclick = ()=>{
      if(solved) return;

      if(txt === correct){
        solved = true;
        btn.classList.add("correct");
        correctTotal++;

        resultBox.textContent = "Ï†ïÎãµÏûÖÎãàÎã§!";
        resultBox.style.background = "#4CAF50";
        resultBox.style.color = "#fff";

        setTimeout(generateQuiz, 1000);
      }else{
        btn.classList.add("wrong");
        wrongTotal++;

        resultBox.textContent = "ÌãÄÎ†∏ÏäµÎãàÎã§.";
        resultBox.style.background = "#f44336";
        resultBox.style.color = "#fff";
      }
      updateScore();
    };

    box.appendChild(btn);
  });

  MathJax.typesetPromise();
}

window.onload = () => setStage(1);
</script>
</body>
</html>
